<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ServerQuery</title>
<link href="torquedoc.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<table width="100%" class="header">
<tr>
</tr>
<tr><td class="headermenu">
	<center>
	<a class="qindex" href="index.html">Main</a> &nbsp; 
	<a class="qindex" target="_blank" href="https://github.com/GarageGames/Torque2D">GitHub</a>
	</center>
</td></tr>
</table>
<br>
<!-- END HEADER -->
<!-- Generated by Doxygen 1.8.3.1 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ServerQuery</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga5c0da89e26d191e9607aff504eeb10d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#ga5c0da89e26d191e9607aff504eeb10d6">cancelServerQuery</a> ()</td></tr>
<tr class="separator:ga5c0da89e26d191e9607aff504eeb10d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9dc15c45ed6d42ea0a767564d97f290c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#ga9dc15c45ed6d42ea0a767564d97f290c">getServerCount</a> ()</td></tr>
<tr class="separator:ga9dc15c45ed6d42ea0a767564d97f290c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga926286177017b7281705c73fa3bc559b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#ga926286177017b7281705c73fa3bc559b">queryLanServers</a> (port, flags, gametype, missiontype, minplayers, maxplayers, maxbots, regionmask, maxping, mincpu, filterflags)</td></tr>
<tr class="separator:ga926286177017b7281705c73fa3bc559b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf401a7d408f1e5164310c79dad5883b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a> (flags, gametype, missiontype, minplayers, maxplayers, maxbots, regionmask, maxping, mincpu, filterflags)</td></tr>
<tr class="separator:gaf401a7d408f1e5164310c79dad5883b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga655ef178e4b707ae10c2ba76d7543330"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#ga655ef178e4b707ae10c2ba76d7543330">querySingleServer</a> (address[, flags])</td></tr>
<tr class="separator:ga655ef178e4b707ae10c2ba76d7543330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac71c53c64be6baedb3f44d2571a7972f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#gac71c53c64be6baedb3f44d2571a7972f">setServerInfo</a> (index)</td></tr>
<tr class="separator:gac71c53c64be6baedb3f44d2571a7972f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11c2bbe6fff9f46c098f6e68b80ac0e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#ga11c2bbe6fff9f46c098f6e68b80ac0e3">startHeartbeat</a> ()</td></tr>
<tr class="separator:ga11c2bbe6fff9f46c098f6e68b80ac0e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23da1e7cb06a96d0cd5a67bf459b4f23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#ga23da1e7cb06a96d0cd5a67bf459b4f23">stopHeartbeat</a> ()</td></tr>
<tr class="separator:ga23da1e7cb06a96d0cd5a67bf459b4f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfabfa305a9728ed21d9e8011ae173f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ServerQuery.html#gacfabfa305a9728ed21d9e8011ae173f0">stopServerQuery</a> ()</td></tr>
<tr class="separator:gacfabfa305a9728ed21d9e8011ae173f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions which allow you to query the LAN or a master server for online games. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga5c0da89e26d191e9607aff504eeb10d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cancelServerQuery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the cancelServerQuery function to cancel a previous query*() call. </p>
<dl class="section return"><dt>Returns</dt><dd>No return value. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd>queryLANServers, <a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a>, <a class="el" href="group__ServerQuery.html#ga655ef178e4b707ae10c2ba76d7543330">querySingleServer</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga9dc15c45ed6d42ea0a767564d97f290c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getServerCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the getServerCount function to determine the number of game servers found on the last queryLANServers() or <a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer()</a> call. This value is important because it allows us to properly index when calling <a class="el" href="group__ServerQuery.html#gac71c53c64be6baedb3f44d2571a7972f">setServerInfo()</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns a numeric value equal to the number of game servers found on the last queryLANServers() or <a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer()</a> call. Returns 0 if the function was not called, or none were found. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd>queryLANServers, <a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a>, <a class="el" href="group__ServerQuery.html#gac71c53c64be6baedb3f44d2571a7972f">setServerInfo</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga926286177017b7281705c73fa3bc559b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void queryLanServers </td>
          <td>(</td>
          <td class="paramtype">port&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">flags&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gametype&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">missiontype&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">minplayers&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">maxplayers&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">maxbots&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">regionmask&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">maxping&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mincpu&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">filterflags&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the queryLANServers function to establish whether any game servers of the required specification(s) are available on the local area network (LAN). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Look for any game servers advertising at this port. Set to 0 if you don't care what port the game server is using. </td></tr>
    <tr><td class="paramname">flags</td><td>Look for any game servers with these special flags set. Set to 0 for no flags. </td></tr>
    <tr><td class="paramname">gametype</td><td>Look for any game servers playing a game type that matches this string. Set to the NULL string to look for any game type. </td></tr>
    <tr><td class="paramname">missiontype</td><td>Look for any game servers playing a mission type that matches this string. Set to the NULL string to look for any mission type. </td></tr>
    <tr><td class="paramname">minplayers</td><td>Look for any game servers with this number of players or more. Set to 0 for no lower limit. </td></tr>
    <tr><td class="paramname">maxplayers</td><td>Look for any game servers with this number of players or fewer. Set to 0 for no upper limit. </td></tr>
    <tr><td class="paramname">maxbots</td><td>Look for any game servers with this number of AI controlled players or fewer. Set to 0 for no limit. </td></tr>
    <tr><td class="paramname">regionmask</td><td>Look for any master servers, on our master server list, in this region. Set to 0 to examine all regions. </td></tr>
    <tr><td class="paramname">maxping</td><td>Look for any game servers with a PING rate equal to or lower than this. Set to 0 for no upper PING limit. </td></tr>
    <tr><td class="paramname">mincpu</td><td>Look for any game servers with a CPU (clock speed) equal or greater than this. Set to 0 for no CPU (clock speed) limit. </td></tr>
    <tr><td class="paramname">filterflags</td><td>Look for any game servers with this game version number or higher. Set to 0 to find all versions. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>No return value. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ServerQuery.html#ga9dc15c45ed6d42ea0a767564d97f290c">getServerCount</a>, <a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a>, <a class="el" href="group__ServerQuery.html#gac71c53c64be6baedb3f44d2571a7972f">setServerInfo</a>, <a class="el" href="group__ServerQuery.html#gacfabfa305a9728ed21d9e8011ae173f0">stopServerQuery</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaf401a7d408f1e5164310c79dad5883b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void queryMasterServer </td>
          <td>(</td>
          <td class="paramtype">flags&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gametype&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">missiontype&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">minplayers&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">maxplayers&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">maxbots&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">regionmask&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">maxping&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mincpu&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">filterflags&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the queryMasterServer function to query all master servers in the master server list and to establish if they are aware of any game servers that meet the specified requirements, as established by the arguments passed to this function. In order for this function to do anything, a list of master servers must have been previously specified. This list may contain one or more server addresses. A call to this function will search all servers in the list. To specify a list, simply create a set of array entries like this: $pref::Master[0] = "2:192.168.123.15:28002"; $pref::Master[1] = "2:192.168.123.2:28002"; The format of these values is ==&gt; Region Number : IP Address : Port Number These values should be specified in either the client's or the server's preferences file (prefs.cs). You may specifiy it elsewhere, however be sure that it is specified prior to this function being called and before any other functions that rely on it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>Look for any game servers with these special flags set. Set to 0 for no flags. </td></tr>
    <tr><td class="paramname">gametype</td><td>Look for any game servers playing a game type that matches this string. Set to the NULL string to look for any game type. </td></tr>
    <tr><td class="paramname">missiontype</td><td>Look for any game servers playing a mission type that matches this string. Set to the NULL string to look for any mission type. </td></tr>
    <tr><td class="paramname">minplayers</td><td>Look for any game servers with this number of players or more. Set to 0 for no lower limit. </td></tr>
    <tr><td class="paramname">maxplayers</td><td>Look for any game servers with this number of players or fewer. Set to 0 for no upper limit. </td></tr>
    <tr><td class="paramname">maxbots</td><td>Look for any game servers with this number of AI controlled players or fewer. Set to 0 for no limit. </td></tr>
    <tr><td class="paramname">regionmask</td><td>Look for any master servers, on our master server list, in this region. Set to 0 to examine all regions. </td></tr>
    <tr><td class="paramname">maxping</td><td>Look for any game servers with a PING rate equal to or lower than this. Set to 0 for no upper PING limit. </td></tr>
    <tr><td class="paramname">mincpu</td><td>Look for any game servers with a CPU (clock speed) equal or greater than this. Set to 0 for no CPU (clock speed) limit. </td></tr>
    <tr><td class="paramname">filterflags</td><td>Look for any game servers with this game version number or higher. Set to 0 to find all versions. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>No return value. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ServerQuery.html#ga9dc15c45ed6d42ea0a767564d97f290c">getServerCount</a>, queryLANServers, <a class="el" href="group__ServerQuery.html#gac71c53c64be6baedb3f44d2571a7972f">setServerInfo</a>, <a class="el" href="group__ServerQuery.html#ga11c2bbe6fff9f46c098f6e68b80ac0e3">startHeartbeat</a>, <a class="el" href="group__ServerQuery.html#gacfabfa305a9728ed21d9e8011ae173f0">stopServerQuery</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga655ef178e4b707ae10c2ba76d7543330"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void querySingleServer </td>
          <td>(</td>
          <td class="paramtype">address&#160;</td>
          <td class="paramname">[, flags]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the querySingleServer function to re-query a previously queried lan server, OR a game server found with queryLANServers or with queryMasterServer and selected with setServerInfo. This will refresh the information stored by TGE about this server. It will not however modify the values of the $ServerInfo::* global variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The IP address and Port to re-query, i.e. "192.168.123.2:28000". </td></tr>
    <tr><td class="paramname">flags</td><td>No longer used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>No return value. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ServerQuery.html#ga9dc15c45ed6d42ea0a767564d97f290c">getServerCount</a>, queryLANServers, <a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a>, <a class="el" href="group__ServerQuery.html#gac71c53c64be6baedb3f44d2571a7972f">setServerInfo</a>, <a class="el" href="group__ServerQuery.html#gacfabfa305a9728ed21d9e8011ae173f0">stopServerQuery</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gac71c53c64be6baedb3f44d2571a7972f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool setServerInfo </td>
          <td>(</td>
          <td class="paramtype">index&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the setServerInfo function to set the values of the $ServerInfo::* global variables with information for a server found with queryLANServers or with queryMasterServer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>The index of the server to get information about. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Will return true if the information was successfully set, false otherwise. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ServerQuery.html#ga9dc15c45ed6d42ea0a767564d97f290c">getServerCount</a>, queryLANServers, <a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a>, <a class="el" href="group__ServerQuery.html#ga655ef178e4b707ae10c2ba76d7543330">querySingleServer</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga11c2bbe6fff9f46c098f6e68b80ac0e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startHeartbeat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the startHeartbeat function to start advertising this game serer to any master servers on the master server list. In order for this function to do anything, a list of master servers must have been previously specified. This list may contain one or more server addresses. Once this function is called, the game server will re-advertise itself to all the master servers on its master server lits every two minutes. To specify a list, simply create a set of array entries like this: $pref::Master[0] = "2:192.168.123.15:28002"; $pref::Master[1] = "2:192.168.123.2:28002"; The format of these values is ==&gt; Region Number : IP Address : Port Number These values should be specified in either the client's or the server's preferences file (prefs.cs). You may specifiy it elsewhere, however be sure that it is specified prior to this function being called and before any other functions that rely on it. </p>
<dl class="section return"><dt>Returns</dt><dd>No return value. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a>, <a class="el" href="group__ServerQuery.html#ga23da1e7cb06a96d0cd5a67bf459b4f23">stopHeartbeat</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga23da1e7cb06a96d0cd5a67bf459b4f23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stopHeartbeat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the startHeartbeat function to stop advertising this game serer to any master servers on the master server list. </p>
<dl class="section return"><dt>Returns</dt><dd>No return value. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a>, <a class="el" href="group__ServerQuery.html#ga11c2bbe6fff9f46c098f6e68b80ac0e3">startHeartbeat</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gacfabfa305a9728ed21d9e8011ae173f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stopServerQuery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use the stopServerQuery function to cancel any outstanding server queries. </p>
<dl class="section return"><dt>Returns</dt><dd>No return value. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd>queryLANServers, <a class="el" href="group__ServerQuery.html#gaf401a7d408f1e5164310c79dad5883b7">queryMasterServer</a>, <a class="el" href="group__ServerQuery.html#ga655ef178e4b707ae10c2ba76d7543330">querySingleServer</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- START FOOTER -->
<br>
<br>
<center>
	<div style="color: #777777;">
	Copyright &copy; 2013 <a style="color: #777777;" target="_blank" href="http://www.garagegames.com">GarageGames, LLC</a>. All Rights Reserved.
	</div>
</center>
</body>
</html>
